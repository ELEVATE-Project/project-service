openapi: 3.0.0
info:
  title: MI-2.0 API
  version: 1.0.0
  description: >-
    API for MI-2.0 (new and upgraded APIs). x-auth-token has to be passed in
    header for every api call
paths:
  /project/userProjects/add:
    post:
      tags:
        - userProjects
      summary: Add a user project
      description: API to create a new user project - call after initial AI flows
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                program:
                  type: object
                  properties:
                    name:
                      type: string
                    description:
                      type: string
                    language:
                      type: array
                      items:
                        type: string
                    startDate:
                      type: string
                    endDate:
                      type: string
                    source:
                      type: object
                      properties:
                        model:
                          type: string
                        provider:
                          type: string
                        apiVersion:
                          type: string
                        confidenceScore:
                          type: number
                        info:
                          type: object
                          properties:
                            url:
                              type: string
                            title:
                              type: string
                            pageNo:
                              type: string
                    translations:
                      type: object
                      properties:
                        kn:
                          type: object
                          properties:
                            title:
                              type: string
                            description:
                              type: string
                        hi:
                          type: object
                          properties:
                            title:
                              type: string
                            description:
                              type: string
                projects:
                  type: array
                  items:
                    type: object
                    properties:
                      title:
                        type: string
                      status:
                        type: string
                      description:
                        type: string
                      duration:
                        type: string
                      recommendedFor:
                        type: array
                        items:
                          type: string
                      category:
                        type: array
                        items:
                          type: string
                      startDate:
                        type: string
                      endDate:
                        type: string
                      source:
                        type: object
                        properties:
                          model:
                            type: string
                          provider:
                            type: string
                          apiVersion:
                            type: string
                          confidenceScore:
                            type: number
                          info:
                            type: object
                            properties:
                              url:
                                type: string
                              title:
                                type: string
                              pageNo:
                                type: string
                      tasks:
                        type: array
                        items:
                          type: object
                          properties:
                            name:
                              type: string
                            isDeletable:
                              type: boolean
                            sequenceNumber:
                              type: string
                            source:
                              type: object
                              properties:
                                model:
                                  type: string
                                provider:
                                  type: string
                                apiVersion:
                                  type: string
                                confidenceScore:
                                  type: number
                                info:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    title:
                                      type: string
                                    pageNo:
                                      type: string
                            translations:
                              type: object
                              properties:
                                kn:
                                  type: object
                                  properties:
                                    name:
                                      type: string
                                    description:
                                      type: string
                                kl:
                                  type: object
                                  properties:
                                    name:
                                      type: string
                                    description:
                                      type: string
                      translations:
                        type: object
                        properties:
                          hi:
                            type: object
                            properties:
                              title:
                                type: string
                              description:
                                type: string
                          kn:
                            type: object
                            properties:
                              title:
                                type: string
                              description:
                                type: string
            examples:
              example1:
                value:
                  program:
                    name: DCPCR School Development Index 2018-19
                    description: ''
                    language:
                      - English
                    startDate: '2024-04-16T00:00:00.000Z'
                    endDate: '2024-04-16T00:00:00.000Z'
                    source:
                      model: GPT-4
                      provider: OpenAI
                      apiVersion: '4.0'
                      confidenceScore: 0.98
                      info:
                        url: ''
                        title: ''
                        pageNo: ''
                    translations:
                      kn:
                        title: DCPCR ಶಾಲಾ ಅಭಿವೃದ್ಧಿ ಸೂಚ್ಯಂಕ 2018-19
                        description: DCPCR ಶಾಲಾ ಅಭಿವೃದ್ಧಿ ಸೂಚ್ಯಂಕ 2018-19
                      hi:
                        title: डीसीपीसीआर स्कूल विकास सूचकांक 2018-19
                        description: DCPCR ಶಾಲಾ ಅಭಿವೃದ್ಧಿ ಸೂಚ್ಯಂಕ 2018-19
                  projects:
                    - title: Understand Importance of Reading
                      status: started
                      description: ''
                      duration: 2 weeks
                      recommendedFor:
                        - students
                        - teachers
                      category: []
                      startDate: '2024-04-16T00:00:00.000Z'
                      endDate: '2024-04-16T00:00:00.000Z'
                      source:
                        model: GPT-4
                        provider: OpenAI
                        apiVersion: '4.0'
                        confidenceScore: 0.98
                        info:
                          url: ''
                          title: ''
                          pageNo: ''
                      tasks:
                        - name: Task 1
                          isDeletable: false
                          sequenceNumber: '1'
                          source:
                            model: GPT-4
                            provider: OpenAI
                            apiVersion: '4.0'
                            confidenceScore: 0.98
                            info:
                              url: ''
                              title: ''
                              pageNo: ''
                          translations:
                            kn:
                              name: Kannada languageChild
                              description: kannada Descriptiom
                            kl:
                              name: Malayalam languageChild
                              description: Malayalam Descriptiom
                      translations:
                        hi:
                          title: पढ़ने का महत्व समझें
                          description: पढ़ने का महत्व समझें
                        kn:
                          title: ಓದಿನ ಪ್ರಾಮುಖ್ಯತೆಯನ್ನು ಅರ್ಥಮಾಡಿಕೊಳ್ಳಿ
                          description: ಓದಿನ ಪ್ರಾಮುಖ್ಯತೆಯನ್ನು ಅರ್ಥಮಾಡಿಕೊಳ್ಳಿ
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Project created successfully
                  status:
                    type: integer
                    example: 200
                  result:
                    type: object
                    properties:
                      programId:
                        type: string
                        example: 667505a649de1ae76e9e1033
                      projectId:
                        type: string
                        example: 667918baf8063086b629f007
                      lastDownloadedAt:
                        type: string
                        format: date-time
                        example: '2024-06-24T06:56:58.448Z'
  /project/userProjects/update/:projectId:
    put:
      tags:
        - userProjects
      summary: Update an existing project
      description: Update project details by ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reflectionStatus:
                  type: string
                  enum:
                    - started
                    - completed
                  example: started
      responses:
        '200':
          description: Project updated successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Project updated successfully
                  status:
                    type: integer
                    example: 200
                  result:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: 667505a649de1ae76e9e1033
  /project/userProjects/addStory/:projectId:
    post:
      tags:
        - userProjects
      summary: Add a story to a project
      description: Add a story to an existing project using its ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                story:
                  type: object
                  description: Story details for the project.
                  properties:
                    title:
                      type: string
                      example: DCPCR School Development Index 2018-19
                      description: Title of the story.
                    problemStatement:
                      type: string
                      example: problemStatement
                      description: Problem statement for the story.
                    objective:
                      type: string
                      example: sample object
                      description: Objective of the story.
                    timeline:
                      type: string
                      example: 2 weeks
                      description: Estimated timeline for the story.
                    actionSteps:
                      type: array
                      items:
                        type: string
                      example: []
                    resources:
                      type: array
                      items:
                        type: string
                      example: []
                    impact:
                      type: string
                      example: sample impact
                      description: Impact of the story.
                    summary:
                      type: string
                      example: sample summary
                      description: Summary of the story.
                    authorName:
                      type: string
                      example: jon
                      description: Author's name.
                    location:
                      type: string
                      example: authorLocation
                      description: Author's location.
                    conversation:
                      type: array
                      items:
                        type: object
                      example: []
                    chatHistory:
                      type: array
                      items:
                        type: object
                      example: []
                    attachments:
                      type: array
                      description: Attachments associated with the story.
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                            example: 1729251446851.png
                          type:
                            type: string
                            example: image/png
                          sourcePath:
                            type: string
                            example: >-
                              project/668e33a24999c205ea017747/3/5cc85295-b244-4139-88c8-4802c2ad41ad/1729251446851.png
                    pdfInformation:
                      type: array
                      description: PDF details associated with the story.
                      items:
                        type: object
                        properties:
                          filePath:
                            type: string
                            example: sampleFilepath
                          language:
                            type: string
                            example: hindi
      responses:
        '200':
          description: Story added successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Story added successfully
                  status:
                    type: integer
                    example: 200
  /cloud-service/files/preSignedUrls:
    post:
      tags:
        - cloudService
      summary: Generate pre-signed URLs for file uploads
      description: API to generate pre-signed URLs for file uploads to cloud storage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - request
              properties:
                request:
                  type: object
                  properties:
                    5f72f9998925ec7c60f79a91:
                      type: object
                      properties:
                        files:
                          type: array
                          items:
                            type: string
                            example: l1.png
      responses:
        '200':
          description: URL generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Url generated successfully
                  status:
                    type: integer
                    example: 200
                  result:
                    type: object
                    properties:
                      cloudStorage:
                        type: string
                        example: oci
                      additionalProp1:
                        type: object
                        properties:
                          files:
                            type: array
                            items:
                              type: object
                              properties:
                                file:
                                  type: string
                                  example: i1.png
                                payload:
                                  type: object
                                  properties:
                                    sourcePath:
                                      type: string
                                      example: >-
                                        project/5f72f9998925ec7c60f79a91/1/acee9b95-3c5e-4a09-bfb0-993647ab66f0/i1.png
                                    url:
                                      type: string
                                      example: >-
                                        https://***.compat.objectstorage.ap-hyderabad-1.oraclecloud.com/mi/project/5f72f9998925ec7c60f79a91/1/acee9b95-3c5e-4a09-bfb0-993647ab66f0/i1.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=3737771d26e1d8f211a04ec59cfd3037c8d1c6ff%2F20240628%2Fap-hyderabad-1%2Fs3%2Faws4_request&X-Amz-Date=20240628T031041Z&X-Amz-Expires=300&X-Amz-Signature=face99c424124bfc8f3988c2fd80ae0cb06231f3e9989d87fc747e659efaedd7&X-Amz-SignedHeaders=host&x-id=PutObject
                      additionalProp2:
                        type: object
                        properties:
                          files:
                            type: array
                            items:
                              type: object
                              properties:
                                file:
                                  type: string
                                  example: i2.png
                                payload:
                                  type: object
                                  properties:
                                    sourcePath:
                                      type: string
                                      example: >-
                                        project/5f72f9998925ec7c60f79a91/1/acee9b95-3c5e-4a09-bfb0-993647ab66f0/i2.png
                                    url:
                                      type: string
                                      example: >-
                                        https://***.compat.objectstorage.ap-hyderabad-1.oraclecloud.com/mi/project/5f72f9998925ec7c60f79a91/1/acee9b95-3c5e-4a09-bfb0-993647ab66f0/i2.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=3737771d26e1d8f211a04ec59cfd3037c8d1c6ff%2F20240628%2Fap-hyderabad-1%2Fs3%2Faws4_request&X-Amz-Date=20240628T031041Z&X-Amz-Expires=300&X-Amz-Signature=920e8dc3753d16c9932b3b347bc41161fa6d9f4932723a00d6319e4e67a9a682&X-Amz-SignedHeaders=host&x-id=PutObject
                      additionalProp3:
                        type: object
                        properties:
                          files:
                            type: array
                            items:
                              type: object
                              properties:
                                file:
                                  type: string
                                  example: i3.png
                                payload:
                                  type: object
                                  properties:
                                    sourcePath:
                                      type: string
                                      example: >-
                                        project/5f72f9998925ec7c60f79a91/1/acee9b95-3c5e-4a09-bfb0-993647ab66f0/i3.png
                                    url:
                                      type: string
                                      example: >-
                                        https://***.compat.objectstorage.ap-hyderabad-1.oraclecloud.com/mi/project/5f72f9998925ec7c60f79a91/1/acee9b95-3c5e-4a09-bfb0-993647ab66f0/i3.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=3737771d26e1d8f211a04ec59cfd3037c8d1c6ff%2F20240628%2Fap-hyderabad-1%2Fs3%2Faws4_request&X-Amz-Date=20240628T031041Z&X-Amz-Expires=300&X-Amz-Signature=ab12a6c1f00d0c835b405020542bbf7f89b6dfb43e04051606a7a34987b606f&X-Amz-SignedHeaders=host&x-id=PutObject
  /v1/profile/read:
    get:
      tags:
        - profile
      summary: Retrieve user profile information
      description: Fetches the details of the currently authenticated user profile.
      responses:
        '200':
          description: Successfully fetched user profile data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Data fetched successfully
                  status:
                    type: integer
                    example: 200
                  result:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 5
                      email:
                        type: string
                        example: rahul@gmail.com
                      email_verified:
                        type: string
                        example: 'false'
                      name:
                        type: string
                        example: Rahul
                      about:
                        type: string
                        example: PWA
                      share_link:
                        type: string
                        nullable: true
                        example: null
                      status:
                        type: string
                        example: ACTIVE
                      has_accepted_terms_and_conditions:
                        type: boolean
                        example: true
                      languages:
                        type: array
                        items:
                          type: string
                        example: []
                      preferred_language:
                        type: object
                        properties:
                          value:
                            type: string
                            example: en
                          label:
                            type: string
                            example: English
                      organization_id:
                        type: integer
                        example: 1
                      roles:
                        type: array
                        items:
                          type: integer
                        example:
                          - 1
                          - 3
                          - 8
                          - 6
                      meta:
                        type: object
                        additionalProperties: true
                      created_at:
                        type: string
                        format: date-time
                        example: '2024-07-19T06:52:35.604Z'
                      updated_at:
                        type: string
                        format: date-time
                        example: '2024-08-12T09:54:53.619Z'
                      deleted_at:
                        type: string
                        nullable: true
                        example: null
                      organization:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          name:
                            type: string
                            example: Default Organization
                          code:
                            type: string
                            example: default_code
                      user_roles:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 8
                            title:
                              type: string
                              example: program_desiginer
                            label:
                              type: string
                              example: Program Desiginer
                            user_type:
                              type: integer
                              example: 0
                            status:
                              type: string
                              example: ACTIVE
                            organization_id:
                              type: integer
                              example: 1
                            visibility:
                              type: string
                              example: PUBLIC
                      permissions:
                        type: array
                        items:
                          type: object
                          properties:
                            module:
                              type: string
                              example: user
                            request_type:
                              type: array
                              items:
                                type: string
                              example:
                                - POST
                                - DELETE
                                - GET
                                - PUT
                                - PATCH
                            service:
                              type: string
                              example: user
                      block:
                        type: array
                        items:
                          type: object
                          properties:
                            value:
                              type: string
                              example: 5fd1b52ab53a6416aaeefb17
                            label:
                              type: string
                              example: PONDURU
                            externalId:
                              type: string
                              example: 5b6010b6-5394-4704-b05f-0bea83ff1fb7
                      state:
                        type: object
                        properties:
                          value:
                            type: string
                            example: 5f33c3d85f637784791cd830
                          label:
                            type: string
                            example: Unknown
                          externalId:
                            type: string
                            example: Unknown
                      district:
                        type: object
                        properties:
                          value:
                            type: string
                            example: 5fd098e2e049735a86b748ad
                          label:
                            type: string
                            example: VIZIANAGARAM
                          externalId:
                            type: string
                            example: b54a5c6d-98be-4313-af1c-33040b1703aa
